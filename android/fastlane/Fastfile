# Load environment variables from .env file
require 'dotenv'
Dotenv.load('../.env')

platform :android do
  desc "New Version"
  lane :beta do

   # Navigate to Flutter root and build
       sh "cd .. && flutter clean"
       sh "cd .. && flutter build apk --release"

    # Distribute the app to Firebase App Distribution
    firebase_app_distribution(
      app: "1:493725024975:android:c53ac88e28f20f7916adba", # Replace with your Firebase App ID.
      android_artifact_path: "../build/app/outputs/flutter-apk/app-release.apk",
      android_artifact_type: "APK",
      release_notes: "US_Get Support (FAQ & Live Chat) \n Bug_Alert The Message for an invalid mobile number should be shown before creating the password. \n Bug_Show the interval time user should be wait till the 3 OTP sent. \n Bug_Item added from the daily offers not found on the store page.  \n  Bug_Adding an Item to the cart with stock limit.  \n  Bug_Favorite the Pharmacies and Items didn't add the correct data.  \n . Bug_Cannot add items with multiple options.  \n  Bug_Remove the screen after the splash screen.  \n . Bug_Some Item Cards didn't load in the View all Daily offers screen. \n Bug_Coupon discount wasn't calculated when selecting credit payment.  \n . Bug_The item discount value appeared if the value equals 0. \n Bug_Convert Button should redirect the user to the Wallet page. \n . Bug_Apple pay option need to be added to the payment options. \n Bug_Choosing the Credit Card with The Wallet behavior. \n Bug_If the card payment faild with Gazzer wallet the amount will be deducted from the wallet. \n Bug_Payment with a saved Credit Card will require a different amount.  \n Bug_Loyalty Points are not Calculated. \n Bug_Changing the Default Value for the Point to be converted. \n Bug_The voucher applied in the cart however it didn't match the items. \n . Bug_The paid points are reflected wrong in the Wallet History. \n . Bug_The Loyalty Page is not localized in English language.  \n Bug_The message appear when reordering is not clear. \n  Bug_User Points appeared in the conversion page but not in the main loyalty screen.\n Bug_The Reordering cycle igoners the pouche size.",
      groups: "gazar", # Add tester group aliases.
      firebase_cli_token: ENV['FIREBASE_TOKEN'] # Path to your service account key.
    )
  end
end
